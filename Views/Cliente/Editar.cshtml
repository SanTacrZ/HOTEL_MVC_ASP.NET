@model biblioteca_hotel.Clases.Cliente

@{
    ViewData["Title"] = "Editar Cliente";
}

<div class="page-header">
    <h2>Editar Cliente</h2>
    <p class="mb-0">Modifique la información del cliente</p>
</div>

<div class="form-section">
    <form asp-action="Editar" method="post" id="clienteForm">
        <input type="hidden" asp-for="IdCliente" />
        <div asp-validation-summary="ModelOnly" class="validation-summary-errors"></div>

        <div class="row">
            <div class="col-md-6 mb-3">
                <label asp-for="TipoDocumento.Nombre" class="form-label">Tipo Documento <span class="text-danger">*</span></label>
                <select name="TipoDocumento.Nombre" class="form-control" required>
                    <option value="">Seleccione...</option>
                    <option value="CC" selected="@(Model.TipoDocumento?.Nombre == "CC")">Cédula de Ciudadanía</option>
                    <option value="TI" selected="@(Model.TipoDocumento?.Nombre == "TI")">Tarjeta de Identidad</option>
                    <option value="PA" selected="@(Model.TipoDocumento?.Nombre == "PA")">Pasaporte</option>
                    <option value="CE" selected="@(Model.TipoDocumento?.Nombre == "CE")">Cédula de Extranjería</option>
                </select>
                <span asp-validation-for="TipoDocumento.Nombre" class="text-danger"></span>
            </div>

            <div class="col-md-6 mb-3">
                <label asp-for="NumeroDocumento" class="form-label">Número de Documento <span class="text-danger">*</span></label>
                <input asp-for="NumeroDocumento" class="form-control" maxlength="10" pattern="[0-9]{1,10}" 
                       title="Solo números, máximo 10 dígitos" required />
                <small class="form-text text-muted">Máximo 10 dígitos, solo números</small>
                <span asp-validation-for="NumeroDocumento" class="text-danger"></span>
            </div>
        </div>

        <div class="row">
            <div class="col-md-6 mb-3">
                <label asp-for="Nombre" class="form-label">Nombre <span class="text-danger">*</span></label>
                <input asp-for="Nombre" class="form-control" pattern="[A-Za-zÁÉÍÓÚáéíóúÑñ\s]+" 
                       title="Solo letras y espacios, sin números" required />
                <small class="form-text text-muted">Solo letras, sin números</small>
                <span asp-validation-for="Nombre" class="text-danger"></span>
            </div>

            <div class="col-md-6 mb-3">
                <label asp-for="Apellido" class="form-label">Apellido <span class="text-danger">*</span></label>
                <input asp-for="Apellido" class="form-control" pattern="[A-Za-zÁÉÍÓÚáéíóúÑñ\s]+" 
                       title="Solo letras y espacios, sin números" required />
                <small class="form-text text-muted">Solo letras, sin números</small>
                <span asp-validation-for="Apellido" class="text-danger"></span>
            </div>
        </div>

        <div class="row">
            <div class="col-md-6 mb-3">
                <label asp-for="Telefono" class="form-label">Teléfono <span class="text-danger">*</span></label>
                <input asp-for="Telefono" class="form-control" maxlength="10" pattern="[0-9]{10}" 
                       title="Debe tener exactamente 10 dígitos" required />
                <small class="form-text text-muted">Exactamente 10 dígitos</small>
                <span asp-validation-for="Telefono" class="text-danger"></span>
            </div>

            <div class="col-md-6 mb-3">
                <label asp-for="Email" class="form-label">Email <span class="text-danger">*</span></label>
                <input asp-for="Email" type="email" class="form-control" required />
                <span asp-validation-for="Email" class="text-danger"></span>
            </div>
        </div>

        <div class="row">
            <div class="col-md-6 mb-3">
                <label asp-for="TipoCliente" class="form-label">Tipo de Cliente <span class="text-danger">*</span></label>
                <select asp-for="TipoCliente" class="form-control" required>
                    <option value="">Seleccione...</option>
                    <option value="VIP" selected="@(Model.TipoCliente == "VIP")">VIP</option>
                    <option value="Frecuente" selected="@(Model.TipoCliente == "Frecuente")">Frecuente</option>
                    <option value="Corporativo" selected="@(Model.TipoCliente == "Corporativo")">Corporativo</option>
                    <option value="Regular" selected="@(Model.TipoCliente == "Regular")">Regular</option>
                    <option value="Premium" selected="@(Model.TipoCliente == "Premium")">Premium</option>
                </select>
                <span asp-validation-for="TipoCliente" class="text-danger"></span>
            </div>

            <div class="col-md-6 mb-3">
                <label asp-for="NumeroTarjetaCredito" class="form-label">Número de Tarjeta de Crédito</label>
                <input asp-for="NumeroTarjetaCredito" class="form-control" />
            </div>
        </div>

        <div class="mb-3">
            <label asp-for="Preferencias" class="form-label">Preferencias</label>
            <textarea asp-for="Preferencias" class="form-control" rows="3"></textarea>
        </div>

        <div class="d-flex gap-2">
            <button type="submit" class="btn btn-primary">Guardar Cambios</button>
            <a asp-action="Index" class="btn btn-secondary">Cancelar</a>
        </div>
    </form>
</div>

@section Scripts {
    <script>
        document.getElementById('clienteForm').addEventListener('submit', function(e) {
            const nombre = document.querySelector('[name="Nombre"]').value;
            const apellido = document.querySelector('[name="Apellido"]').value;
            const documento = document.querySelector('[name="NumeroDocumento"]').value;
            const telefono = document.querySelector('[name="Telefono"]').value;

            if (/\d/.test(nombre)) {
                e.preventDefault();
                alert('El nombre no puede contener números');
                return false;
            }

            if (/\d/.test(apellido)) {
                e.preventDefault();
                alert('El apellido no puede contener números');
                return false;
            }

            if (documento.length > 10 || !/^\d+$/.test(documento)) {
                e.preventDefault();
                alert('El documento debe tener máximo 10 dígitos y solo números');
                return false;
            }

            if (telefono.length !== 10 || !/^\d+$/.test(telefono)) {
                e.preventDefault();
                alert('El teléfono debe tener exactamente 10 dígitos');
                return false;
            }
        });
    </script>
}
