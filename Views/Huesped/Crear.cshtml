@model biblioteca_hotel.Clases.Huesped

@{
    ViewData["Title"] = "Registrar Huésped";
}

<div class="page-header">
    <h2>Registrar Nuevo Huésped</h2>
    <p class="mb-0">Complete el formulario con la información del huésped</p>
</div>

@if (TempData["Success"] != null)
{
    <div class="alert alert-success alert-dismissible fade show" role="alert">
        @TempData["Success"]
        <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
    </div>
}

<div class="form-section">
    <form asp-action="Crear" method="post" id="huespedForm">
        <div asp-validation-summary="ModelOnly" class="validation-summary-errors"></div>

        <div class="row">
            <div class="col-md-6 mb-3">
                <label asp-for="TipoDocumento.Nombre" class="form-label">Tipo Documento <span class="text-danger">*</span></label>
                <select name="TipoDocumento.Nombre" class="form-control" required>
                    <option value="">Seleccione...</option>
                    <option value="CC">Cédula de Ciudadanía</option>
                    <option value="TI">Tarjeta de Identidad</option>
                    <option value="PA">Pasaporte</option>
                    <option value="CE">Cédula de Extranjería</option>
                </select>
                <span asp-validation-for="TipoDocumento.Nombre" class="text-danger"></span>
            </div>

            <div class="col-md-6 mb-3">
                <label asp-for="NumeroDocumento" class="form-label">Número de Documento <span class="text-danger">*</span></label>
                <input asp-for="NumeroDocumento" class="form-control" maxlength="10" pattern="[0-9]{1,10}" 
                       title="Solo números, máximo 10 dígitos" required />
                <small class="form-text text-muted">Máximo 10 dígitos, solo números</small>
                <span asp-validation-for="NumeroDocumento" class="text-danger"></span>
            </div>
        </div>

        <div class="row">
            <div class="col-md-6 mb-3">
                <label asp-for="Nombre" class="form-label">Nombre <span class="text-danger">*</span></label>
                <input asp-for="Nombre" class="form-control" pattern="[A-Za-zÁÉÍÓÚáéíóúÑñ\s]+" 
                       title="Solo letras y espacios, sin números" required />
                <small class="form-text text-muted">Solo letras, sin números</small>
                <span asp-validation-for="Nombre" class="text-danger"></span>
            </div>

            <div class="col-md-6 mb-3">
                <label asp-for="Apellido" class="form-label">Apellido <span class="text-danger">*</span></label>
                <input asp-for="Apellido" class="form-control" pattern="[A-Za-zÁÉÍÓÚáéíóúÑñ\s]+" 
                       title="Solo letras y espacios, sin números" required />
                <small class="form-text text-muted">Solo letras, sin números</small>
                <span asp-validation-for="Apellido" class="text-danger"></span>
            </div>
        </div>

        <div class="row">
            <div class="col-md-6 mb-3">
                <label asp-for="Nacionalidad" class="form-label">Nacionalidad <span class="text-danger">*</span></label>
                <input asp-for="Nacionalidad" class="form-control" pattern="[A-Za-zÁÉÍÓÚáéíóúÑñ\s]+" 
                       title="Solo letras y espacios, sin números" required />
                <small class="form-text text-muted">Solo letras, sin números</small>
                <span asp-validation-for="Nacionalidad" class="text-danger"></span>
            </div>

            <div class="col-md-6 mb-3">
                <label asp-for="Telefono" class="form-label">Teléfono <span class="text-danger">*</span></label>
                <input asp-for="Telefono" class="form-control" maxlength="10" pattern="[0-9]{10}" 
                       title="Debe tener exactamente 10 dígitos" required />
                <small class="form-text text-muted">Exactamente 10 dígitos</small>
                <span asp-validation-for="Telefono" class="text-danger"></span>
            </div>
        </div>

        <div class="mb-3">
            <label asp-for="Email" class="form-label">Email</label>
            <input asp-for="Email" type="email" class="form-control" />
            <span asp-validation-for="Email" class="text-danger"></span>
        </div>

        <div class="d-flex gap-2">
            <button type="submit" class="btn btn-primary">Guardar Huésped</button>
            <a asp-action="Index" class="btn btn-secondary">Cancelar</a>
        </div>
    </form>
</div>

@section Scripts {
    <script>
        document.getElementById('huespedForm').addEventListener('submit', function(e) {
            const nombre = document.querySelector('[name="Nombre"]').value;
            const apellido = document.querySelector('[name="Apellido"]').value;
            const nacionalidad = document.querySelector('[name="Nacionalidad"]').value;
            const documento = document.querySelector('[name="NumeroDocumento"]').value;
            const telefono = document.querySelector('[name="Telefono"]').value;

            if (/\d/.test(nombre)) {
                e.preventDefault();
                alert('El nombre no puede contener números');
                return false;
            }

            if (/\d/.test(apellido)) {
                e.preventDefault();
                alert('El apellido no puede contener números');
                return false;
            }

            if (/\d/.test(nacionalidad)) {
                e.preventDefault();
                alert('La nacionalidad no puede contener números');
                return false;
            }

            if (documento.length > 10 || !/^\d+$/.test(documento)) {
                e.preventDefault();
                alert('El documento debe tener máximo 10 dígitos y solo números');
                return false;
            }

            if (telefono.length !== 10 || !/^\d+$/.test(telefono)) {
                e.preventDefault();
                alert('El teléfono debe tener exactamente 10 dígitos');
                return false;
            }
        });
    </script>
}
